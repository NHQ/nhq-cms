- content_for :title, @show.title + " - 500 Clown"
- body_id('shows')
- content_for :head do
  = stylesheet_link_tag "colorbox"
  = javascript_include_tag "jquery.colorbox"
- content_for :jstemplates do
  jQuery(function() { app.setupVideos(); app.setupCredits(); });
  
  
- if user_signed_in?
  .admin
    = link_to(image_tag('trash.png', :alt => 'Destroy', :title => 'Delete Show') + 'Delete Show', @show, :confirm => 'Are you sure you want to delete the show "' + @show.title + '"?', :method => :delete)
    = link_to(image_tag('pencil.gif', :alt => 'Edit', :title => 'Edit Show') + 'Edit Show', edit_show_path(@show))

.g560
  .videos
    - if @show.videos.first
      %ul{:class => 'video_list'}
        - @show.videos.each do |video|
          = render(:partial => "videos/video", :locals => {:video => video})
    - else
      %ul.video_list

    - if user_signed_in?
      #add_video.tk-poster + Add a Video
      #new_video{:style => "display: none;"}= render '/videos/video-form'
      
  .description.redcloth
    %h3.title
      = @show.title
    = RedCloth.new(@show.description).to_html.html_safe

    - unless @show.tags_array.empty?
      .tags
        %span.tag_title Tags:
        = @show.tags.gsub(/,/, ", ")

  .flickrs
    - if @show.flickrs.first
      %h3.tk-poster Photos:
      %ul.flickr_list
        - @show.flickrs.each do |fset|
          = render(:partial => "flickrs/photoset", :locals => {:fset => fset})
    - else
      %ul.flickr_list

    - if user_signed_in?
      #add_flickr
        .tk-poster + Add a Photoset
        = render 'flickrs/flickr-form'

  - if @show.reviews.first
    .reviews
      %h3.tk-poster Press:
      %ul.review_list
        - @show.reviews.each do |review|
          = render(:partial => "reviews/review", :locals => {:review => review})

  - if user_signed_in?
    #add_review
      .tk-poster= link_to('+ Add New Review', new_show_review_path(@show))
      - available_reviews = Review.not_in(:_id => @show.review_ids)
      - if available_reviews.count
        = form_for @show do |r|
          %select{:id => "review_id", :name => "review_id"}
            - reviews_array = available_reviews.map { |review| [truncate(review.description), review.id] }
            = options_for_select(reviews_array)
          = r.submit "Add Existing Review"

  - if @show.additional_info?  
    .additional_info.redcloth.g560
      %h3.tk-poster Additional Info:
      = RedCloth.new(@show.additional_info).to_html.html_safe
    
#sidebar.g240
  .credits
    - if @show.credits.first
      %h3.tk-poster Credits
      %ul.credit_list
        - @show.credits.each do |credit|
          = render(:partial => 'credits/credit', :locals => {:credit => credit})
    - else
      %ul.credit_list

    - if user_signed_in?
      #add_credit.tk-poster + Add a Credit
      #new_credit{:style => "display: none;"}= render 'credits/credit-form'