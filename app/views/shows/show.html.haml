- content_for :title, @show.title + " - 500 Clown"

%h1.title
  = @show.title
  - if user_signed_in?
    %span.admin= link_to('Edit', edit_show_path(@show))

%p.description
  - if @show.image?
    = image_tag(@show.image.url(:medium), :class => "right")
  = @show.description.html_safe

.tags
  %span.tag_title Tags:
  = @show.tags.gsub(/,/, ", ")

.credits
  - if @show.credits.empty?
    There are currently no credits.
  - else
    %h3.credits_title Credits:
    %ul.credit_list
      - @show.credits.each do |c|
        %li
          %span.title= c.title
          \ : 
          %span.name= c.name
          - if user_signed_in?
            %span.admin= link_to(image_tag('edit-delete.png', :alt => 'Destroy'), show_credit_path(@show, c), :confirm => 'Are you sure?', :method => :delete)
  - if user_signed_in?
    = render 'credit'

- unless @show.additional_info.nil?
  .additional_info
    %h3 Additional Info:
    %p= @show.additional_info.html_safe

.reviews
  - if @show.reviews.empty?
    %h3.reviews_title Press:
    There are currently no reviews.
  - else
    %h3.reviews_title Press:
    %ul.review_list
      - @show.reviews.each do |review|
        %li
          = link_to review.title, show_review_path(@show, review)
          - if user_signed_in?
            %span.admin= link_to(image_tag('edit-delete.png', :alt => 'Destroy'), show_path(@show), :confirm => 'Are you sure?', :method => :delete)
  - if user_signed_in?
    %span.admin
      = link_to('+ Create new review', new_show_review_path(@show))
      = form_for @show do |r|
        %select{:id => "review_id", :name => "review_id"}
          - reviews_array = Review.excludes(:show_id => @show.id).map { |review| [truncate(review.title), review.id] }
          = options_for_select(reviews_array)
        = r.submit "Add existing review"