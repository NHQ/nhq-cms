- coder = HTMLEntities.new

%li
  .quote
    %blockquote
      = coder.decode('&ldquo;') + review.description.html_safe + coder.decode('&rdquo;')
  .source
    - if review.url?
      .tk-poster
        = coder.decode('&mdash;')
        = link_to(review.title, review.url, :target => "_blank")
    - else
      .tk-poster
        = coder.decode('&mdash;')
        = review.title
    - if user_signed_in?
      - if @show
        %span.tk-poster= link_to("Edit Review", edit_show_review_path(@show, review))
        %span.tk-poster= link_to(image_tag('trash.png', :alt => 'Remove', :title => 'Remove Review') + "remove review", "/shows/#{@show.id}/reviews/#{review.id}/remove", :confirm => 'Are you sure you want to remove this Review?')
      - elsif @workshop
        %span.tk-poster= link_to("Edit Review", edit_workshop_review_path(@workshop, review))
        %span.tk-poster= link_to(image_tag('trash.png', :alt => 'Remove', :title => 'Remove Review') + "remove review", "/workshops/#{@workshop.id}/reviews/#{review.id}/remove", :confirm => 'Are you sure you want to remove this Review?')
      - else
        %span.tk-poster= link_to("Edit Review", edit_review_path(review))
        %span.tk-poster= link_to(image_tag('trash.png', :alt => 'Destroy', :title => 'Delete Event') + ' Delete Review', review, :confirm => 'Are you sure you want to delete this review?', :method => :delete)
    